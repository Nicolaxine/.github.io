<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Chasse au Tr√©sor - 18 ans !</title>
  
  <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
  <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>

  <style>
    body { margin: 0; padding: 0; font-family: Arial, sans-serif; background: #000; color: white; overflow: hidden; }
    
    #ui-overlay {
      position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10;
    }
    .centered-ui {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; pointer-events: auto;
    }
    .bottom-bar {
      position: absolute; bottom: 20px; left: 0; right: 0; text-align: center; font-size: 1.2em; text-shadow: 2px 2px 4px #000;
    }
    
    #ar-container {
      width: 90%; max-width: 520px; height: 60vh; margin: 20px auto;
      border: 4px solid #00ff88; border-radius: 16px; overflow: hidden;
      box-shadow: 0 0 25px rgba(0, 255, 136, 0.7); position: relative; background: #111;
    }
    
    #ar-container video, #ar-container canvas {
      position: absolute !important; top: 0; left: 0; width: 100% !important; height: 100% !important;
      object-fit: cover; z-index: 1; background: transparent !important;
    }
    
    h2 { margin: 0 0 20px; font-size: 2em; text-shadow: 3px 3px 6px #000; }
    p { font-size: 1.3em; margin: 15px 10px; text-shadow: 1px 1px 4px #000; }
    button { padding: 12px 24px; font-size: 1.2em; background: rgba(0,180,255,0.85); color: white; border: none; border-radius: 12px; cursor: pointer; }
  </style>
</head>
<body>

  <!-- Overlay UI -->
  <div id="ui-overlay">
    <div class="centered-ui">
      <h2>Chasse au Tr√©sor<br>Joyeux 18 ans ! üéâ</h2>
      <p>Bouge un peu pour que le GPS se cale.<br>Une petite sph√®re rouge devrait appara√Ætre juste devant toi (test fixe) !</p>
      
      <button onclick="alert('Test AR OK ? La sph√®re rouge fixe est visible ? Les indices GPS apparaissent quand tu es proche !');">
        V√©rifier le test
      </button>
    </div>

    <div class="bottom-bar">
      √âtape 1/3 ‚Äì Distance estim√©e : <span id="distance">...</span>
    </div>
  </div>

  <!-- Conteneur AR -->
  <div id="ar-container">
    <a-scene 
      embedded 
      arjs="sourceType: webcam; 
            videoTexture: true; 
            debugUIEnabled: true; 
            sourceWidth: 1280; 
            sourceHeight: 720; 
            trackingMethod: best;"
      vr-mode-ui="enabled: false"
      style="width: 100%; height: 100%; position: absolute; top: 0; left: 0;"
    >
      <!-- Cam√©ra GPS -->
      <a-camera gps-camera rotation-reader></a-camera>

      <!-- TEST SIMPLE : Sph√®re rouge fixe, petite, juste devant toi (pas besoin de GPS) -->
      <a-entity position="0 0 -3" scale="0.5 0.5 0.5">
        <a-sphere color="red" radius="0.4"></a-sphere>
        <a-text 
          value="TEST AR - Sph√®re rouge fixe" 
          color="white" 
          position="0 0.6 0" 
          align="center" 
          width="4"
        ></a-text>
      </a-entity>

      <!-- Exemple d'indice GPS (petit, ajuste les coordonn√©es r√©elles de ton jardin) -->
      <a-entity 
        gps-entity-place="latitude: 47.2184; longitude: -1.5536;"  <!-- ‚Üê Mets tes vraies coordonn√©es ici ! -->
        scale="1 1 1" 
        look-at="[gps-camera]"
      >
        <a-sphere color="#ff8800" radius="0.6"></a-sphere>  <!-- Orange, petite -->
        <a-text 
          value="Indice 1 - Cherche ici !" 
          color="white" 
          position="0 1 0" 
          align="center" 
          width="5"
        ></a-text>
      </a-entity>

      <!-- Tu peux en ajouter d'autres avec des coordonn√©es diff√©rentes -->
    </a-scene>
  </div>

  <!-- Petit JS pour debug (optionnel) -->
  <script>
    // Affiche un message si la sph√®re fixe est cliqu√©e (tap sur mobile)
    document.querySelector('a-sphere[color="red"]').addEventListener('click', () => {
      alert('Sph√®re rouge touch√©e ! L\'AR fonctionne bien.');
    });
  </script>

</body>
</html>